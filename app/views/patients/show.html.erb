<div class='container' style="margin:100px">
      <div class="row">
<h2> Patient Record ( <%= @patient.patient_name %> ) </h2>

Age: <%= @patient.age %> <br/>

Telephone number: <%= @patient.telephone_number %> <br/>

<h3>
    Patient appointments
</h3>

<br/>
<button type="button" class="btn btn-primary" data-toggle="modal" data-target=".bs-example-modal-lg">Add Appointment</button>

<div class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
     <div style="padding:30px">
      <h4>
            Add Appointment
       </h4>
       <div>
            <%= form_for ([@patient, @patient.appointments.build]) do |f| %>
                <div class="form-group">
                    <label for="exampleInputEmail1">
                        <%= f.label :start_date %>
                        <%= f.date_field :start_date , class:'form-control',placeholder:'Start date'%>
                </div> 
                
                 <div class="form-group">
                    <label for="exampleInputEmail1">
                        <%= f.label :end_date %>
                        <%= f.date_field :end_date , class:'form-control',placeholder:'End date'%>
                </div>
                
                <div class="form-group">
                    <label for="exampleInputEmail1">
                        <%= f.label :physician %>
                        <%= select_tag 'physicians' , options_from_collection_for_select(@physicians , 'id','physician_name') , class: 'form-control' , placeholder:'select physician'%>
                </div>
                    <%= f.submit 'Submit' , class: 'btn btn-default'%>
            <% end %>
       </div>
      </div> 
    </div>
  </div>
</div>

<div style="padding-top:40px">
<table width="80%">

<th>
    <tr>
        <td>
            Start date
        </td>
        <td>
            End date
        </td>
        <td>
            Physician
        </td>  
        <td>
        </td>      
    </tr>
</th>
<% @patient.appointments.each do |appointment| %>
<% if (!appointment.physician.nil?) %>
    <tr>
        <td width="20%">
            <%= appointment.start_date %>       
        </td>
        <td  width="20%">
            <%= appointment.end_date %>
        </td>
        <td width="20%">
        
          <%=  appointment.physician.physician_name %>
        
        </td>
         <td width="20%">
             <%= link_to 'cancel appointment' ,  ([@patient , appointment]) , method: :delete , data: {confirm:"are you sure you want to cancel this appointment ?"} %>
        </td>          
    </tr>
<% end %>
<% end %>
</table>
</div>
